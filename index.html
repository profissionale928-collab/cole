
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<link rel="icon" type="image/x-icon" href="https://i.imgur.com/CIstRaz.png"> <!-- Manter o favicon original ou buscar um da Moura -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Baterias Moura - Distribuidor Oficial</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
:root{--azul-principal:#004a99;--azul-claro:#007bff;--branco:#fff;--cinza-fundo:#f4f6f9;--verde-whatsapp:#309716;--vermelho-preco:#d9534f; --cor-menu-texto: #333; --cor-menu-hover: #004a99; --cor-submenu-fundo: #fff;}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
body{background-color:var(--cinza-fundo);line-height:1.6}
.container{width:90%;max-width:1200px;margin:0 auto}
#pagina-container{display:flex;flex-direction:column;min-height:100vh}
#conteudo-principal{flex-grow:1}

/* --- NOVO CSS PARA O CABEÇALHO (MENU NOVO) --- */
.novo-header {
    background-color: var(--branco); 
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    padding: 0px 0; 
    border-bottom: 1px solid #eee;
}

.novo-header .container {
    display: flex;
    justify-content: flex-start; /* Ajustado para mobile */
    align-items: center;
    padding: 0; /* Ajustado para mobile */
}

/* Garante que o menu principal só apareça no desktop */
.novo-header .main-nav {
    display: block;
    width: 100%;
}

.novo-header .main-nav ul {
    list-style: none;
    display: flex; 
    margin: 0;
    padding: 15px 0; /* Padding vertical centraliza */
    justify-content: center; /* Centraliza os itens do menu no desktop */
}

.novo-header .main-nav > ul > li {
    position: relative; 
    margin: 0 15px; 
}

.novo-header .main-nav a {
    text-decoration: none;
    color: var(--cor-menu-texto);
    font-weight: 600;
    padding: 10px 5px; 
    display: flex;
    align-items: center;
    transition: color 0.3s ease;
}

.novo-header .main-nav a:hover {
    color: var(--cor-menu-hover);
}

.novo-header .main-nav .fa-chevron-down {
    margin-left: 5px;
    font-size: 0.7em; 
    transition: transform 0.3s ease;
}

/* Sub-menu styling */
.novo-header .main-nav ul ul {
    display: none; 
    position: absolute;
    top: 100%; 
    left: 0;
    background-color: var(--cor-submenu-fundo);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    min-width: 180px; 
    z-index: 900; 
    border-radius: 5px;
    padding: 10px 0;
}

.novo-header .main-nav ul ul li {
    padding: 0; 
}

.novo-header .main-nav ul ul a {
    padding: 8px 15px; 
    color: var(--cor-menu-texto);
    white-space: nowrap; 
    font-weight: 400; 
    justify-content: flex-start; 
}

.novo-header .main-nav ul ul a:hover {
    background-color: #f5f5f5; 
    color: var(--cor-menu-hover);
}

/* Mostra o sub-menu ao passar o mouse */
.novo-header .main-nav > ul > li:hover > ul {
    display: block;
}

/* Rotaciona a seta para cima ao passar o mouse */
.novo-header .main-nav > ul > li:hover > a .fa-chevron-down {
    transform: rotate(180deg);
}
/* --- FIM NOVO CSS PARA O CABEÇALHO --- */


/* ESTILO DO HEADER AZUL (PADRÃO: DESKTOP) */
.header-azul{
    position: relative; 
    /* Desktop: Cor sólida azul, sem imagem de fundo */
    background-color: var(--azul-principal);
    background-image: none;
    color:var(--branco);
    padding:30px 0; 
    box-shadow:0 2px 4px rgba(0,0,0,.3); 
    z-index: 10; 
}

/* Pseudoelemento para o efeito de FADE/Opacidade (OCULTADO NO DESKTOP) */
.header-azul::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* Opacidade zero no desktop */
    background-color: rgba(0, 0, 0, 0.4); 
    opacity: 0; /* Chave: Esconde o pseudoelemento no Desktop */
    z-index: -1; 
}

.header-azul .container{
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px; 
    position: relative; 
    z-index: 1;
}

/* NOVO: Estilo para a área do link que engloba as logos e o texto */
.logo-area-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: var(--branco); 
    flex-shrink: 0;
}
/* Novo: Estilo para o H1 de texto */
.logo-text{
    font-size:1.8em;
    margin-left: 10px; 
    flex-shrink: 0; 
    /* Remove text-shadow no Desktop (fundo sólido) */
    text-shadow: none; 
} 

.menu-hamburguer { /* Botão hamburguer oculto no desktop */
    display: none; 
}

/* ESTILO DA BARRA DE PESQUISA */
.search-container {
    flex-grow: 1; 
    max-width: 400px; 
    position: relative;
}
#search-input {
    width: 100%;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    font-size: 1em;
    outline: none;
    transition: all 0.3s;
}
/* Ajuste de sombra para a barra de busca, para o fundo sólido */
#search-input:focus {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
}
/* FIM ESTILO DA BARRA DE PESQUISA */

/* --- CSS PARA LOGOS NA NAVBAR (TAMANHOS E CORES) --- */
/* Logo 1: Branca/Vazada (Distribuidora) */
.logo-distribuidora-nav {
    height: 40px; 
    margin-right: 10px; 
    flex-shrink: 0;
    filter: brightness(0) invert(1); /* Mantida branca */
}

/* Logo 2: Colorida (Kia & Hyundai) */
.logo-kia-hyundai-nav {
    height: 45px; 
    margin-right: 0px; 
    flex-shrink: 0;
    filter: none; /* Mantida colorida */
}


@media (max-width: 768px) { 
    
    /* === MOBILE: ADICIONA A IMAGEM DE FUNDO E O FADE === */
    .header-azul{
        /* Mobile: Adiciona a imagem de fundo */
        background-image: url('https://i.imgur.com/v8w7x7x.png'); /* Nova imagem de fundo Moura */
        background-size: cover; 
        background-position: center; 
        padding: 20px 0; /* Padding ajustado para mobile */
    }
    
    .header-azul::before {
        /* Mobile: Ativa o fade (90% de opacidade) */
        opacity: 1; 
    }

    .logo-text{
        /* Devolve a sombra para o texto no mobile (para o fundo com imagem) */
        text-shadow: 1px 1px 4px rgba(0,0,0,1); 
    }

    /* Logs e Layout Mobile (mantido como estava) */
    .logo-distribuidora-nav {
        height: 45px; 
        margin-right: 5px;
        filter: brightness(0) invert(1); 
    }
    .logo-kia-hyundai-nav {
        height: 50px; 
        margin-right: 10px;
        filter: none; 
    }

    .logo-text {
        display: none; 
    }

    .logo-area-link { 
        order: 3; 
        flex-grow: 1; 
        justify-content: flex-start;
        margin-right: 5px; 
    } 

    .header-azul .container {
        justify-content: flex-start; 
        gap: 5px; 
    }
    
    .search-container { 
        order: 5; 
    }
    .nav-acoes { 
        order: 4; 
    }
}
/* --- FIM NOVO CSS PARA LOGOS NA NAVBAR --- */

.btn-carrinho{background-color:var(--azul-claro);color:var(--branco);border:none;padding:10px 15px;border-radius:5px;cursor:pointer;font-weight:700;transition:background-color .3s; flex-shrink: 0;}
.btn-carrinho:hover{background-color:#0056b3}

/* --- ESTILO DO MINI-BANNER --- */
.mini-banner-area {
    width: 100%;
    overflow: hidden; 
    height: 350px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    background-color: #f0f0f0; 
    display: flex; 
    align-items: center;
    justify-content: center;
}
#banner-slider {
    display: flex;
    transition: transform 0.5s ease-in-out; 
    height: 100%;
    white-space: nowrap; 
    align-items: center;
}
.banner-slide {
    width: 100%; 
    flex-shrink: 0;
    height: 100%;
    display: inline-flex; 
    align-items: center;
    justify-content: center;
}
.banner-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover; 
    object-position: center;
}
/* --- FIM ESTILO DO MINI-BANNER --- */


.produtos-destaque{padding:40px 0}
.produtos-destaque h3{text-align:center;color:var(--azul-principal);margin-bottom:30px;font-size:2em}
.grid-produtos{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;min-height:300px;position:relative}
.produto-card.hidden {
    display: none !important;
}
.produto-card{background-color:var(--branco);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:20px;text-align:center;transition:transform .3s; cursor: pointer;}
.produto-card:hover{transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,.15)}
.produto-card img{width:100%;max-height:180px;object-fit:contain;margin-bottom:15px}
.produto-card h4{color:var(--azul-principal);font-size:1.2em;margin-bottom:5px}
.produto-card p{color:#666;font-size:.9em;margin-bottom:10px}
.preco{font-size:1.4em;color:var(--vermelho-preco);font-weight:700;margin-bottom:15px;display:block}
.btn-adicionar{background-color:var(--cor-menu-hover);color:var(--branco);border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-weight:700;transition:background-color .3s}
.btn-adicionar:hover{background-color:var(--azul-claro)}

/* CSS para o estado de carregamento do botão */
.btn-adicionar.loading {
    background-color: #004a99; /* Cor do azul principal para o estado de carregamento */
    cursor: not-allowed;
    position: relative;
    color: transparent !important; /* Esconde o texto */
    pointer-events: none; /* Impede cliques adicionais */
}
.btn-adicionar.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    margin-top: -8px;
    margin-left: -8px;
    border: 2px solid #fff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Novo CSS para a aba do carrinho (Sidebar) */
.carrinho-sidebar {
    height: 100%;
    width: 0; /* Começa fechado */
    position: fixed;
    z-index: 1001;
    top: 0;
    right: 0;
    background-color: var(--branco);
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 60px;
    box-shadow: -4px 0 10px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
}

.carrinho-sidebar.open {
    width: 350px; /* Largura aberta */
}

.carrinho-sidebar .fechar-modal {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 36px;
    margin-left: 50px;
    cursor: pointer;
}

.carrinho-sidebar-content {
    padding: 20px;
    flex-grow: 1;
    overflow-y: auto;
}

.carrinho-sidebar h2 {
    color: var(--azul-principal);
    text-align: center;
    margin-bottom: 20px;
    padding-top: 10px;
}

@media (max-width: 768px) {
    .carrinho-sidebar.open {
        width: 100%; /* Ocupa toda a largura no mobile */
    }
}

/* Esconde o modal antigo do carrinho */
.modal {
    display: none !important;
}

/* O modal antigo será substituído pela sidebar */
.modal-content{background-color:var(--branco);margin:10% auto;padding:25px;border-radius:10px;width:90%;max-width:500px;position:relative;box-shadow:0 4px 12px rgba(0,0,0,.2)}
.fechar-modal{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}
.fechar-modal:hover{color:#000}
#itens-carrinho{margin-top:15px;max-height:300px;overflow-y:auto;border-bottom:1px solid #eee;padding-bottom:15px}
.item-carrinho{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-top: 1px solid #eee;
    position: relative;
}
.item-carrinho span:nth-child(1) { flex: 3; margin-right: 15px; font-size: 0.95em; min-width: 120px;}
.item-carrinho span:nth-child(2) { flex: 0 0 40px; text-align: center; font-weight: bold;}
.item-carrinho strong { flex: 0 0 80px; text-align: right; font-size: 1em; color: var(--vermelho-preco);}
.btn-remover {
    background: none;
    border: none;
    color: #999;
    font-size: 1.2em;
    cursor: pointer;
    margin-left: 10px;
    transition: color 0.2s;
}
.btn-remover:hover {
    color: var(--vermelho-preco);
}
#valor-total-area {
    text-align: right;
    padding: 15px 0;
    border-top: 1px solid #eee;
    font-size: 1.2em;
    font-weight: 700;
    color: var(--azul-principal);
}
#valor-total-area strong {
    color: var(--vermelho-preco);
}
#carrinho-vazio {
    text-align: center;
    color: #666;
    padding: 20px 0;
}
#formulario-pedido {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}
#formulario-pedido h4 {
    color: var(--azul-principal);
    margin-bottom: 15px;
}
#formulario-pedido input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}
#formulario-pedido button {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.3s;
    margin-top: 10px;
}
#btn-iniciar-pedido {
    background-color: var(--verde-whatsapp);
    color: var(--branco);
}
#btn-iniciar-pedido:hover {
    background-color: #25800f;
}
#finalizar-whatsapp {
    background-color: var(--verde-whatsapp);
    color: var(--branco);
}
#finalizar-whatsapp:hover {
    background-color: #25800f;
}
#mensagem-status {
    margin-top: 10px;
    text-align: center;
    font-weight: 600;
}
.detalhes-produto-modal {
    display: none;
    position: fixed;
    z-index: 1002;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}
.detalhes-produto-content {
    background-color: var(--branco);
    margin: 5% auto;
    padding: 25px;
    border-radius: 10px;
    width: 90%;
    max-width: 700px;
    position: relative;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.detalhes-produto-content h3 {
    color: var(--azul-principal);
    margin-bottom: 15px;
}
.detalhes-produto-content p {
    margin-bottom: 10px;
}
.detalhes-produto-content img {
    max-width: 100%;
    height: auto;
    border-radius: 5px;
    margin-bottom: 15px;
}
.detalhes-produto-content .preco {
    font-size: 1.6em;
}
.detalhes-produto-content .btn-adicionar {
    margin-top: 15px;
}
.detalhes-produto-content .fechar-modal {
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 30px;
}
#notification-snackbar {
    visibility: hidden;
    min-width: 250px;
    background-color: var(--verde-whatsapp);
    color: #fff;
    text-align: center;
    border-radius: 5px;
    padding: 16px;
    position: fixed;
    z-index: 1000;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    font-size: 17px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
#notification-snackbar.show {
    visibility: visible;
    -webkit-animation: fadein 0.5s, fadeout 0.5s 3.5s;
    animation: fadein 0.5s, fadeout 0.5s 3.5s;
}
@-webkit-keyframes fadein {
    from {bottom: 0; opacity: 0;} 
    to {bottom: 30px; opacity: 1;}
}
@keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}
@-webkit-keyframes fadeout {
    from {bottom: 30px; opacity: 1;} 
    to {bottom: 0; opacity: 0;}
}
@keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 0; opacity: 0;}
}
.whatsapp-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 999;
}
.whatsapp-float a {
    display: flex;
    align-items: center;
    background-color: var(--verde-whatsapp);
    color: var(--branco);
    padding: 10px 15px;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: background-color 0.3s;
}
.whatsapp-float a:hover {
    background-color: #25800f;
}
.whatsapp-float i {
    font-size: 1.5em;
    margin-right: 10px;
}
/* Estilos para o menu mobile */
.menu-mobile-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 999;
    display: none; /* Oculto por padrão */
    transition: opacity 0.3s ease;
    opacity: 0;
}

.menu-mobile-container.show-menu {
    display: block;
    opacity: 1;
}

#menu-mobile {
    position: absolute;
    top: 0;
    left: -80%; /* Começa fora da tela */
    width: 80%;
    height: 100%;
    background-color: var(--branco);
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
    transition: left 0.3s ease;
    overflow-y: auto;
    padding-top: 20px;
}

.menu-mobile-container.show-menu #menu-mobile {
    left: 0; /* Entra na tela */
}

#menu-mobile ul {
    list-style: none;
    padding: 0;
}

#menu-mobile li {
    border-bottom: 1px solid #eee;
}

#menu-mobile a {
    display: block;
    padding: 15px 20px;
    text-decoration: none;
    color: var(--cor-menu-texto);
    font-weight: 600;
}

#menu-mobile a:hover {
    background-color: #f5f5f5;
    color: var(--cor-menu-hover);
}

#menu-mobile .has-submenu > a {
    position: relative;
}

#menu-mobile .has-submenu > a::after {
    content: '\f054'; /* Ícone de seta para a direita */
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
}

#menu-mobile .has-submenu.open > a::after {
    content: '\f078'; /* Ícone de seta para baixo */
}

#menu-mobile ul ul {
    display: none;
    background-color: #f9f9f9;
    padding-left: 15px;
}

#menu-mobile ul ul a {
    padding: 10px 20px;
    font-weight: 400;
}

.menu-hamburguer {
    display: block;
    font-size: 1.5em;
    color: var(--branco);
    cursor: pointer;
    padding: 10px;
    order: 1;
}

.menu-hamburguer:hover {
    opacity: 0.8;
}

.nav-acoes {
    display: flex;
    align-items: center;
    gap: 10px;
    order: 2;
}

.nav-acoes .btn-carrinho {
    padding: 8px 12px;
    font-size: 0.9em;
}

.nav-acoes .fa-shopping-cart {
    margin-right: 5px;
}

.nav-acoes .contador-carrinho {
    background-color: var(--vermelho-preco);
    color: var(--branco);
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 0.7em;
    position: absolute;
    top: -5px;
    right: -5px;
    font-weight: 700;
}

@media (min-width: 769px) {
    .menu-hamburguer {
        display: none;
    }
    .menu-mobile-container {
        display: none !important;
    }
}
</style>
</head>
<body>
<div id="pagina-container">
    
    <!-- Header Azul (Topo) -->
    <header class="header-azul">
        <div class="container">
            <div class="menu-hamburguer" id="menu-hamburguer">
                <i class="fas fa-bars"></i>
            </div>
            
            <a href="#" class="logo-area-link">
                <img src="https://i.imgur.com/CIstRaz.png" alt="Logo Distribuidora" class="logo-distribuidora-nav">
                <img src="https://i.imgur.com/M7q1z0Z.png" alt="Logo Kia & Hyundai" class="logo-kia-hyundai-nav">
                <h1 class="logo-text">Baterias Moura</h1>
            </a>
            
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Buscar baterias por modelo, Ah, ou tipo...">
            </div>
            
            <div class="nav-acoes">
                <button class="btn-carrinho" onclick="abrirCarrinhoSidebar()">
                    <i class="fas fa-shopping-cart"></i>
                    Carrinho (<span id="contador-carrinho">0</span>)
                </button>
            </div>
        </div>
    </header>
    
    <!-- Header Branco (Menu Principal) -->
    <header class="novo-header">
        <div class="container">
            <nav class="main-nav">
                <ul>
                    <li><a href="#">Início</a></li>
                    <li class="has-submenu">
                        <a href="#">Baterias Automotivas <i class="fas fa-chevron-down"></i></a>
                        <ul>
                            <li><a href="#" onclick="filterByBrand('m40fd')">Moura M40FD</a></li>
                            <li><a href="#" onclick="filterByBrand('m60ad')">Moura M60AD</a></li>
                            <li><a href="#" onclick="filterByBrand('m70ae')">Moura M70AE</a></li>
                            <li><a href="#" onclick="filterByBrand('m80ad')">Moura M80AD</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="#">Baterias para Moto <i class="fas fa-chevron-down"></i></a>
                        <ul>
                            <li><a href="#" onclick="filterByBrand('moto ma5-d')">Moura MA5-D</a></li>
                            <li><a href="#" onclick="filterByBrand('moto ma9-e')">Moura MA9-E</a></li>
                        </ul>
                    </li>
                    <li><a href="#" onclick="filterByBrand('estacionaria')">Baterias Estacionárias</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- Menu Mobile (Oculto por padrão) -->
    <div class="menu-mobile-container" id="menu-mobile-container">
        <nav id="menu-mobile">
            <ul>
                <li><a href="#">Início</a></li>
                <li class="has-submenu">
                    <a href="#">Baterias Automotivas</a>
                    <ul>
                        <li><a href="#" onclick="filterByBrand('m40fd')">Moura M40FD</a></li>
                        <li><a href="#" onclick="filterByBrand('m60ad')">Moura M60AD</a></li>
                        <li><a href="#" onclick="filterByBrand('m70ae')">Moura M70AE</a></li>
                        <li><a href="#" onclick="filterByBrand('m80ad')">Moura M80AD</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#">Baterias para Moto</a>
                    <ul>
                        <li><a href="#" onclick="filterByBrand('moto ma5-d')">Moura MA5-D</a></li>
                        <li><a href="#" onclick="filterByBrand('moto ma9-e')">Moura MA9-E</a></li>
                    </ul>
                </li>
                <li><a href="#" onclick="filterByBrand('estacionaria')">Baterias Estacionárias</a></li>
                <li><a href="#">Contato</a></li>
            </ul>
        </nav>
    </div>
    
    <!-- Sidebar do Carrinho (Novo) -->
    <div id="carrinho-sidebar" class="carrinho-sidebar">
        <span class="fechar-modal" onclick="fecharCarrinhoSidebar()">&times;</span>
        <div class="carrinho-sidebar-content">
            <h2>Seu Carrinho</h2>
            
            <div id="itens-carrinho">
                <!-- Itens do carrinho serão inseridos aqui -->
            </div>
            
            <p id="carrinho-vazio">Seu carrinho está vazio.</p>
            
            <div id="valor-total-area">
                Total: <span id="valor-total">R$ 0,00</span>
            </div>
            
            <button id="btn-iniciar-pedido" class="btn-adicionar" style="display:none;">Iniciar Pedido</button>
            
            <div id="formulario-pedido" style="display:none;">
                <h4>Finalizar Pedido (WhatsApp)</h4>
                <form id="form-pedido">
                    <input type="text" id="campo-nome" placeholder="Seu Nome Completo" required>
                    <input type="tel" id="campo-whatsapp" placeholder="WhatsApp com DDD (Ex: 11987654321)" required>
                    <button type="submit" id="finalizar-whatsapp">Enviar Pedido por WhatsApp</button>
                </form>
                <p id="mensagem-status"></p>
            </div>
        </div>
    </div>
    
    <!-- Conteúdo Principal -->
    <main id="conteudo-principal">
        
        <!-- Mini Banner (Slider) -->
        <section class="mini-banner-area">
            <div id="banner-slider">
                <div class="banner-slide"><img src="https://i.imgur.com/Y4y4Y4Y.png" alt="Banner 1 - Moura"></div>
                <div class="banner-slide"><img src="https://i.imgur.com/Z5z5Z5Z.png" alt="Banner 2 - Moura"></div>
                <div class="banner-slide"><img src="https://i.imgur.com/X3x3X3X.png" alt="Banner 3 - Moura"></div>
            </div>
        </section>
        
        <!-- Produtos em Destaque -->
        <section class="produtos-destaque">
            <div class="container">
                <h3>Baterias Moura em Destaque</h3>
                <div class="grid-produtos" id="lista-produtos">
                    <!-- Produtos serão carregados aqui pelo JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Modal de Detalhes do Produto (Mantido) -->
        <div id="detalhes-produto-modal" class="detalhes-produto-modal">
            <div class="detalhes-produto-content">
                <span class="fechar-modal" onclick="fecharDetalhesProdutoModal()">&times;</span>
                <div id="detalhes-produto-body">
                    <!-- Conteúdo de detalhes do produto será inserido aqui -->
                </div>
            </div>
        </div>
        
    </main>
    
    <!-- Rodapé -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h4>Navegação</h4>
                <ul>
                    <li><a href="#">Início</a></li>
                    <li><a href="#">Automotivas</a></li>
                    <li><a href="#">Motos</a></li>
                    <li><a href="#">Estacionárias</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Fale Conosco</h4>
                <p><i class="fas fa-phone"></i> (11) 96072-0059</p>
                <p><i class="fas fa-envelope"></i> contato@bateriasmoura.com.br</p>
                <p><i class="fas fa-map-marker-alt"></i> São Paulo - SP</p>
            </div>
            <div class="footer-section">
                <h4>Redes Sociais</h4>
                <div class="social-links">
                    <a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="#" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Receba Nossas Novidades</h4>
                <p>Inscreva-se e receba promoções exclusivas e dicas de manutenção de baterias.</p>
                <form action="#" method="post" class="newsletter-form">
                    <input type="email" placeholder="Seu E-mail" required>
                    <button type="submit" class="btn-newsletter">Inscrever</button>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="container">
                <p>&copy; 2025 Baterias Moura - Distribuidor Oficial. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>
</div>

<div id="notification-snackbar"></div>

<div class="whatsapp-float">
    <a href="https://api.whatsapp.com/send?phone=5511960720059&text=Ol%C3%A1%2C%20preciso%20de%20ajuda%20com%20baterias%20Moura." target="_blank">
        <i class="fab fa-whatsapp"></i>
        Solicitar Orçamento
    </a>
</div>
<script>

const catalogoPecas=[
// Baterias Moura de Exemplo
{id: 101, nome: "Moura M40FD - 40Ah", preco: 349.90, modelo: "Automotiva", estoque: 50, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura 40Ah, ideal para carros populares com baixa demanda elétrica. Livre de manutenção, 18 meses de garantia."},
{id: 102, nome: "Moura M60AD - 60Ah", preco: 499.90, modelo: "Automotiva", estoque: 50, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura 60Ah, alta performance e durabilidade. Indicada para veículos médios e com equipamentos eletrônicos."},
{id: 103, nome: "Moura M70AE - 70Ah", preco: 619.90, modelo: "Automotiva", estoque: 32, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura 70Ah, excelente para veículos de grande porte, SUVs e picapes. Maior poder de arranque e resistência."},
{id: 104, nome: "Moura Moto MA5-D - 5Ah", preco: 189.90, modelo: "Moto", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura para motos 5Ah, tecnologia AGM/VRLA. Ideal para motos de baixa cilindrada. Pronta para uso."},
{id: 105, nome: "Moura Moto MA9-E - 9Ah", preco: 279.90, modelo: "Moto", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura para motos 9Ah, maior capacidade e durabilidade. Indicada para motos de média e alta cilindrada."},
{id: 106, nome: "Moura Estacionária Clean 100Ah", preco: 1250.00, modelo: "Estacionária", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura Estacionária 100Ah, para sistemas de energia solar, no-breaks e telecomunicações. Ciclo profundo e longa vida útil."},
{id: 107, nome: "Moura M48FD - 48Ah", preco: 399.90, modelo: "Automotiva", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura 48Ah, excelente custo-benefício para veículos compactos e sedans."},
{id: 108, nome: "Moura M80AD - 80Ah", preco: 750.00, modelo: "Automotiva", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura 80Ah, máxima potência para veículos com alta exigência elétrica."},
{id: 109, nome: "Moura Estacionária Clean 60Ah", preco: 890.00, modelo: "Estacionária", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura Estacionária 60Ah, ideal para no-breaks e sistemas de segurança."},
{id: 110, nome: "Moura Moto MA7-D - 7Ah", preco: 229.90, modelo: "Moto", estoque: 21, imagem_url: "https://i.imgur.com/M7q1z0Z.png", descricaoCompleta: "Bateria Moura para motos 7Ah, confiabilidade e desempenho para o dia a dia."},
]

let carrinho=[];
const listaProdutosEl=document.getElementById('lista-produtos');
const contadorCarrinhoEl=document.getElementById('contador-carrinho');
const modalCarrinhoEl=document.getElementById('modal-carrinho'); // Mantido para compatibilidade, mas não usado
const carrinhoSidebarEl = document.getElementById('carrinho-sidebar'); // Novo elemento
const itensCarrinhoEl=document.getElementById('itens-carrinho');
const valorTotalEl=document.getElementById('valor-total');
const carrinhoVazioEl=document.getElementById('carrinho-vazio');
const formularioPedidoEl=document.getElementById('formulario-pedido');
const btnIniciarPedidoEl=document.getElementById('btn-iniciar-pedido');
const btnFinalizarWhatsAppEl=document.getElementById('finalizar-whatsapp');
const mensagemStatusEl=document.getElementById('mensagem-status');
const notificationSnackbarEl=document.getElementById('notification-snackbar');
const searchInputEl = document.getElementById('search-input'); 

// Variáveis do Banner Slider
let currentSlide = 0;
const totalSlides = 3; 

// Variáveis do Menu Mobile
const menuHamburguerEl = document.getElementById('menu-hamburguer');
const menuMobileContainerEl = document.getElementById('menu-mobile-container');
const submenuLinks = document.querySelectorAll('#menu-mobile .has-submenu > a');

function showNotification(message) {
    notificationSnackbarEl.classList.remove('show');
    notificationSnackbarEl.innerHTML = message;
    notificationSnackbarEl.classList.add('show');
    
    setTimeout(() => {
        notificationSnackbarEl.classList.remove('show');
    }, 4000); 
}

function startBannerSlider() {
    // A função de slider só precisa ser executada se o banner estiver visível
    if(window.innerWidth >= 1200) {
        setInterval(() => {
            currentSlide = (currentSlide + 1) % totalSlides;
            const offset = -currentSlide * 100;
            bannerSliderEl.style.transform = `translateX(${offset}%)`;
        }, 3000); 
    }
}

function carregarProdutos(){
listaProdutosEl.innerHTML=catalogoPecas.map(p=>`
<div class="produto-card" data-id="${p.id}" data-nome="${p.nome.toLowerCase()}" data-modelo="${p.modelo.toLowerCase()}">
<img src="${p.imagem_url}" alt="${p.nome}">
<h4>${p.nome}</h4>
<p>Tipo: ${p.modelo}</p>
<p class="preco">R$ ${p.preco.toFixed(2).replace('.',',')}</p>
<button class="btn-adicionar" data-id="${p.id}" data-nome="${p.nome}" data-preco="${p.preco}" data-modelo="${p.modelo}">
Adicionar ao Carrinho
</button>
</div>
`).join('');
document.querySelectorAll('.btn-adicionar').forEach(b=>b.addEventListener('click',adicionarAoCarrinho));
// Re-adiciona o listener para o modal de detalhes após carregar os produtos
adicionarListenersDetalheProduto();
}


// Função que filtra por marca, limpando a busca por texto
function filterByBrand(brand) {
    searchInputEl.value = ''; 
    filterProducts(brand); 
    // Fechar menu mobile se estiver aberto após clique
    if (window.innerWidth <= 768) {
         menuMobileContainerEl.classList.remove('show-menu');
    }
}

// Função de filtro unificada (para busca por texto e marca)
function filterProducts(filterTermOrBrand = null) {
    const filterValue = filterTermOrBrand ? filterTermOrBrand.toLowerCase().trim() : searchInputEl.value.toLowerCase().trim();
    const cards = document.querySelectorAll('.produto-card');

    cards.forEach(card => {
        const nome = card.dataset.nome;
        const modelo = card.dataset.modelo;
        
        if (filterValue === '') {
            card.classList.remove('hidden');
            return;
        }

        // Filtra por nome, modelo (tipo de bateria) ou pela marca (Moura)
        if (nome.includes(filterValue) || modelo.includes(filterValue) || 'moura'.includes(filterValue)) {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
        }
    });
}

// Funções para a nova Sidebar do Carrinho
function abrirCarrinhoSidebar() {
    carrinhoSidebarEl.classList.add('open');
}

function fecharCarrinhoSidebar() {
    carrinhoSidebarEl.classList.remove('open');
}

function renderizarCarrinho(){
itensCarrinhoEl.innerHTML='';
let total=0;
if(carrinho.length===0){
carrinhoVazioEl.style.display='block';
btnIniciarPedidoEl.style.display='none';
formularioPedidoEl.style.display='none';
}else{
carrinhoVazioEl.style.display='none';
btnIniciarPedidoEl.style.display='block';
carrinho.forEach(item=>{
const subtotal=item.preco*item.quantidade;
total+=subtotal;
const itemEl=document.createElement('div');
itemEl.classList.add('item-carrinho');
itemEl.innerHTML=`
<span>${item.nome} (${item.modelo})</span>
<span>${item.quantidade}x</span>
<strong>R$ ${subtotal.toFixed(2).replace('.',',')}</strong>
<button class="btn-remover" data-id="${item.id}">&times;</button>
`;
itensCarrinhoEl.appendChild(itemEl);
});
itensCarrinhoEl.querySelectorAll('.btn-remover').forEach(b=>b.addEventListener('click',removerDoCarrinho));
}
valorTotalEl.textContent=`R$ ${total.toFixed(2).replace('.',',')}`;
contadorCarrinhoEl.textContent=carrinho.reduce((a,i)=>a+i.quantidade,0);
}

// Função modificada para incluir delay e carregamento
function adicionarAoCarrinho(e){
    const btn = e.target;
    
    // 1. Estado de Carregamento
    btn.classList.add('loading');
    btn.textContent = ''; // Limpa o texto para mostrar o spinner

    // 2. Delay
    setTimeout(() => {
        // Lógica original de adicionar ao carrinho
        const id=parseInt(btn.dataset.id);
        const nome=btn.dataset.nome;
        const preco=parseFloat(btn.dataset.preco);
        const modelo=btn.dataset.modelo;
        
        const itemExistente=carrinho.find(i=>i.id===id);
        if(itemExistente){
            itemExistente.quantidade++;
        }else{
            carrinho.push({id,nome,preco,quantidade:1,modelo});
        }
        
        renderizarCarrinho();
        
        // 3. Abrir a aba do carrinho (Sidebar)
        abrirCarrinhoSidebar();

        // 4. Remover estado de carregamento e restaurar texto
        btn.classList.remove('loading');
        btn.textContent = 'Adicionar ao Carrinho';
        
    }, 800); // Delay de 800ms
}

function removerDoCarrinho(e){
const id=parseInt(e.target.dataset.id);
const index=carrinho.findIndex(i=>i.id===id);
if(index!==-1){
const item=carrinho[index];
item.quantidade--;
if(item.quantidade<=0){
carrinho.splice(index,1);
}
}
renderizarCarrinho();
}

function finalizarPedidoWhatsApp(e){
e.preventDefault();
const clienteNome=document.getElementById('campo-nome').value.trim();
const clienteWhatsapp=document.getElementById('campo-whatsapp').value.replace(/[^0-9]/g,'');
if(!clienteNome||clienteWhatsapp.length<10){
mensagemStatusEl.style.color='red';
mensagemStatusEl.textContent='Preencha seu nome e um número de WhatsApp válido (com DDD).';
return;
}
const valorTotal=carrinho.reduce((a,i)=>a+(i.preco*i.quantidade),0);
const itensMensagem=carrinho.map((i,idx)=>
`*${idx+1}.* ${i.nome} (${i.modelo})\n    *Qtde:* ${i.quantidade} | *Subtotal:* R$ ${(i.preco*i.quantidade).toFixed(2).replace('.',',')}`
).join('\n');
const mensagemWhatsapp=encodeURIComponent(
`*NOVO PEDIDO DE BATERIAS MOURA (VIA SITE)*\n\n`+
`*Cliente:* ${clienteNome}\n`+
`*WhatsApp:* ${clienteWhatsapp}\n\n`+
`*ITENS DO PEDIDO:*\n${itensMensagem}\n\n`+
`*TOTAL GERAL ESTIMADO:* R$ ${valorTotal.toFixed(2).replace('.',',')}\n\n`+
`*Atenção:* Por favor, confirme o estoque, o valor e calcule o frete para o cliente.`
);
const numeroAtendente='5511960720059';
const linkWhatsApp=`https://api.whatsapp.com/send?phone=${numeroAtendente}&text=${mensagemWhatsapp}`;
mensagemStatusEl.style.color='green';
mensagemStatusEl.textContent='Pedido pronto! Abrindo o WhatsApp em instantes...';
btnFinalizarWhatsAppEl.disabled=true;
setTimeout(()=>{
window.open(linkWhatsApp,'_blank');
carrinho=[];
renderizarCarrinho();
fecharCarrinhoSidebar();
btnFinalizarWhatsAppEl.disabled=false;
document.getElementById('campo-nome').value='';
document.getElementById('campo-whatsapp').value='';
mensagemStatusEl.textContent='';
},2000);
}

// ADICIONADO: Funções para o Modal de Detalhes do Produto

function fecharDetalhesProdutoModal() {
    document.getElementById('detalhes-produto-modal').style.display = 'none';
}

function abrirDetalhesProdutoModal(produtoId) {
    // Busca o produto no catálogo usando o ID
    const produto = catalogoPecas.find(p => p.id === produtoId);

    if (produto) {
        const modalContentBody = document.getElementById('detalhes-produto-body');
        
        // Cria o HTML de detalhes do produto
        modalContentBody.innerHTML = `
            <div style="text-align: center; margin-bottom: 20px;">
                <img src="${produto.imagem_url}" alt="${produto.nome}" style="max-width: 200px;">
            </div>
            <h3>${produto.nome}</h3>
            <p><strong>Tipo:</strong> ${produto.modelo}</p>
            <p><strong>Descrição:</strong> ${produto.descricaoCompleta}</p>
            <p class="preco">R$ ${produto.preco.toFixed(2).replace('.',',')}</p>
            <button class="btn-adicionar" data-id="${produto.id}" data-nome="${produto.nome}" data-preco="${produto.preco}" data-modelo="${produto.modelo}" onclick="adicionarAoCarrinho(event); fecharDetalhesProdutoModal();">
                Adicionar ao Carrinho
            </button>
        `;
        
        document.getElementById('detalhes-produto-modal').style.display = 'block';
    }
}

function adicionarListenersDetalheProduto() {
    document.querySelectorAll('.produto-card').forEach(card => {
        card.addEventListener('click', (e) => {
            // Verifica se o clique não foi no botão "Adicionar ao Carrinho"
            if (!e.target.classList.contains('btn-adicionar')) {
                const produtoId = parseInt(card.dataset.id);
                abrirDetalhesProdutoModal(produtoId);
            }
        });
    });
}

// Event Listeners
document.addEventListener('DOMContentLoaded',()=>{
carregarProdutos();
renderizarCarrinho();
// startBannerSlider(); // Desativado para evitar conflito com o novo CSS

// Evento de busca
searchInputEl.addEventListener('input', () => filterProducts());

// Evento de fechar a sidebar do carrinho
document.querySelector('#carrinho-sidebar .fechar-modal').addEventListener('click', fecharCarrinhoSidebar);

// Evento de fechar a sidebar ao clicar fora
window.addEventListener('click', e => {
    if (e.target === carrinhoSidebarEl) {
        fecharCarrinhoSidebar();
    }
});

// Evento de iniciar pedido
btnIniciarPedidoEl.addEventListener('click', () => {
    formularioPedidoEl.style.display = 'block';
    btnIniciarPedidoEl.style.display = 'none';
});

// Evento de finalizar pedido
document.getElementById('form-pedido').addEventListener('submit', finalizarPedidoWhatsApp);

// Eventos do Menu Mobile
menuHamburguerEl.addEventListener('click', () => {
    menuMobileContainerEl.classList.toggle('show-menu');
});

menuMobileContainerEl.addEventListener('click', (e) => {
    if (e.target === menuMobileContainerEl) {
        menuMobileContainerEl.classList.remove('show-menu');
    }
});

submenuLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const parentLi = link.closest('li');
        parentLi.classList.toggle('open');
        const submenu = parentLi.querySelector('ul');
        if (submenu) {
            submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
        }
    });
});

});
</script>
</body>
</html>
